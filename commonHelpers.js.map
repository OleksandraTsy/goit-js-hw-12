{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getDataFromAPI(searchQuery, page, perPage) {\n  const baseURL = 'https://pixabay.com/api/';\n  const params = {\n    key: '42941472-1aaa1e5ed1787820ede60bd86',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  };\n\n  const response = await axios.get(baseURL, { params });\n  return response.data;\n}","import SimpleLightbox from 'simplelightbox';\n\nexport const galleryEl = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.refresh();\n\nexport function renderGallery(images) {\n\n  const galleryMarkup = images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <li class=\"card\">\n        <a href=\"${largeImageURL}\" class=\"link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\">\n          <ul class=\"list-container\">\n          <li class=\"item-description\"><h3>Likes</h3> <p>${likes}</p></li>\n          <li class=\"item-description\"><h3>Views</h3> <p>${views}</p></li>\n          <li class=\"item-description\"><h3>Comments</h3> <p>${comments}</p></li>\n          <li class=\"item-description\"><h3>Downloads</h3> <p>${downloads}</p></li>\n        </ul>\n        </a>\n      </li>\n    `\n  })\n    .join('');\n  \n  galleryEl.insertAdjacentHTML('beforeend', galleryMarkup);\n  \n  lightbox.refresh();\n}\n\nexport function showResultMessage() {\n  const resultMessage = document.createElement('p');\n  resultMessage.classList.add('result-message');\n  resultMessage.textContent =\n    \"We're sorry, but you've reached the end of search results.\";\n  galleryEl.insertAdjacentElement('afterend', resultMessage);\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getDataFromAPI } from './js/pixabay-api';\nimport './css/loader.css';\nimport {\n  renderGallery,\n  galleryEl,\n  showResultMessage,\n} from './js/render-functions';\n\n\nconst searchForm = document.querySelector('.form');\nconst inputElement = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nhideLoader();\n\nlet page = 1;\nlet userQuery = '';\nconst perPage = 15;\n\nsearchForm.addEventListener('submit', submitHandle);\n\nasync function submitHandle(e) {\n  e.preventDefault();\n  galleryEl.innerHTML = '';\n  userQuery = inputElement.value.trim();\n  page = 1;\n\n  if (userQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please fill in the field for search!',\n      position: 'topCenter',\n    });\n    hideLoadMoreBtn();\n\n    return;\n  }\n\n  endOfCollectionMessage();\n\n  showLoader();\n\n  try {\n    const images = await getDataFromAPI(userQuery, page, perPage);\n    const totalHits = images.totalHits;\n\n    if (images.hits.length === 0) {\n      galleryEl.innerHTML = '';\n      iziToast.info({\n        title: 'Info',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topCenter',\n      });\n      \n      hideLoadMoreBtn();\n      return;\n    } else {\n      renderGallery(images.hits);\n      inputElement.value = '';\n      showLoadMoreBtn();\n    }\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      showResultMessage();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there are no images matching your search query. Please try again.',\n      position: 'topCenter',\n    });\n\n  } finally {\n    hideLoader();\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  try {\n    if (loadMoreBtn) {\n      page += 1;\n    }\n    const images = await getDataFromAPI(userQuery, page, perPage);\n    const totalHits = images.totalHits;\n\n    renderGallery(images.hits);\n    showLoader();\n    if (perPage * page >= totalHits) {\n      hideLoadMoreBtn();\n      showResultMessage();\n    }\n\n    const galleryCardHeight =\n      galleryEl.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({ top: galleryCardHeight * 2, behavior: 'smooth' });\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching more images: ${error}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\n// ==== L O A D E R ===== //\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\n// ==== L O A D   M O R E   C A R D S ===== //\nfunction showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\n// ==== M E S S A G E ==== //\nfunction endOfCollectionMessage() {\n  const resultMessage = document.querySelector('.result-message');\n  if (resultMessage) {\n    resultMessage.remove();\n  }\n}"],"names":["getDataFromAPI","searchQuery","page","perPage","baseURL","params","axios","galleryEl","lightbox","SimpleLightbox","renderGallery","images","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showResultMessage","resultMessage","searchForm","inputElement","loader","loadMoreBtn","hideLoader","userQuery","submitHandle","iziToast","hideLoadMoreBtn","endOfCollectionMessage","showLoader","totalHits","showLoadMoreBtn","error","galleryCardHeight"],"mappings":"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"}